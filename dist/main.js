!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist/",n(n.s=0)}([function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=function(){function t(){n(this,t),this.m={}}return r(t,[{key:"add",value:function(t,e){this.m.hasOwnProperty(e)?this.m[e].push(t):(this.m[e]=[],this.m[e].push(t))}},{key:"remove",value:function(t,e){var n=this;this.m.hasOwnProperty(e)&&this.m[e].forEach(function(i){i===t&&(n.m[e].splice(n.m[e].indexOf(t),1),0==Object.keys(n.m[e]).length&&delete n.m[e])})}},{key:"get",value:function(){return this.m}}]),t}(),a=function(){function t(){n(this,t),this.mapList=new s,this.dataX=[],this.dataO=[],this.player="X",this.stepCount=0,this.stateWin=!1,this.windCombinations=[[1,2,3],[1,4,7],[1,5,9],[2,5,8],[3,6,9],[3,5,7],[4,5,6],[7,8,9]]}return r(t,[{key:"addStep",value:function(t,e){t.textContent||("X"===this.player?this.dataX.push(e):this.dataO.push(e),this.stepCount++),(this.dataX.length>2||this.dataO.length>2)&&(this.checkWin(this.dataX,e)||this.checkWin(this.dataO,e))&&(this.stateWin=!0)}},{key:"checkWin",value:function(t,e){for(var n=0;n<this.windCombinations.length;n++){var i=this.windCombinations[n],r=0;if(-1!==i.indexOf(e))for(var s=0;s<i.length;s++)if(-1!==t.indexOf(i[s])&&3===++r)return!0;r=0}}},{key:"changePlayer",value:function(){"X"===this.player?this.player="O":this.player="X"}},{key:"reset",value:function(){this.dataX=[],this.dataO=[],this.player="X",this.stepCount=0,this.stateWin=!1}},{key:"subscribe",value:function(t,e){this.mapList.add(t,e)}},{key:"uscribe",value:function(t,e){this.mapList.remove(t,e)}},{key:"notify",value:function(t,e,n,i,r){this.mapList.get()[t]&&this.mapList.get()[t].forEach(function(t){t.update(e,n,i,r)})}}]),t}(),o=function(){function t(){n(this,t),this.gameTitle=document.querySelector("#message"),this.ceil=document.querySelectorAll(".game-item"),this.notPress=function(){for(var t=0;t<this.ceil.length;t++)this.ceil[t].style.pointerEvents="none"},this.yesPress=function(){for(var t=0;t<this.ceil.length;t++)this.ceil[t].innerText="",this.ceil[t].style.pointerEvents="auto"}}return r(t,[{key:"update",value:function(t,e,n,i){e.textContent||(e.innerText=t,e.style.pointerEvents="none"),this.showGameTitle(t,n,i)}},{key:"showGameTitle",value:function(t,e,n){var i;n?(this.notPress(),this.gameTitle.innerText="Победил игрок: "+t):(i="X"===t?"O":"X",this.gameTitle.innerText=9===e?"НИЧЬЯ":"Ходит игрок: "+i)}},{key:"resetGame",value:function(){this.yesPress(),this.gameTitle.innerText="Ходит игрок: X"}}]),t}();new function t(){n(this,t);var e=new a,i=new o,r=document.querySelectorAll(".game-item"),s=document.querySelector("#reset-game");e.subscribe(i,"changeData");for(var u=0;u<r.length;u++)r[u].addEventListener("click",c);function c(){e.addStep(this,+this.getAttribute("data-ceil")),e.notify("changeData",e.player,this,e.stepCount,e.stateWin),e.changePlayer()}s.addEventListener("click",function(){i.resetGame(),e.reset()})}}]);